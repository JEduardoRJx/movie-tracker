(this["webpackJsonpmovie-tracker"]=this["webpackJsonpmovie-tracker"]||[]).push([[0],{31:function(e,t,r){e.exports=r(48)},36:function(e,t,r){},42:function(e,t,r){},44:function(e,t,r){},45:function(e,t,r){},46:function(e,t,r){},47:function(e,t,r){},48:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(14),s=r.n(o),i=(r(36),r(2)),c=r.n(i),u=r(23),v=r(24),l=r(29),p=r(25),m=r(30),f=r(11),h=r(5),d=function(){var e,t,r;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e="".concat("https://api.themoviedb.org/3/movie/now_playing?","api_key=").concat("cee1e60becdb4297de68233fbef2f560","&language=en-US"),a.next=3,c.a.awrap(fetch(e));case 3:if((t=a.sent).ok){a.next=6;break}throw Error("There was an issue retrieving your movies. Please try again.");case 6:return a.next=8,c.a.awrap(t.json());case 8:return r=(r=a.sent).results.map((function(e){return{backdrop_path:e.backdrop_path,genre_ids:e.genre_ids,id:e.id,overview:e.overview,poster_path:e.poster_path,release_date:e.release_date,title:e.title,vote_average:e.vote_average,isFavorite:!1}})),a.abrupt("return",r);case 11:case"end":return a.stop()}}))},b=function(e,t){var r,a,n,o;return c.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return r="http://localhost:3001/api/v1/users/".concat(e,"/moviefavorites"),a={method:"POST",body:JSON.stringify({movie_id:t.id,title:t.title,poster_path:t.poster_path,release_date:t.release_date,vote_average:t.vote_average,overview:t.overview}),headers:{"Content-Type":"application/json"}},s.next=4,c.a.awrap(fetch(r,a));case 4:if((n=s.sent).ok){s.next=7;break}throw Error("Unable to add movie as favorite. Try again later.");case 7:return s.next=9,c.a.awrap(n.json());case 9:return o=s.sent,s.abrupt("return",o);case 11:case"end":return s.stop()}}))},E=function(e){var t,r,a;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t="http://localhost:3001/api/v1/users/".concat(e,"/moviefavorites"),n.next=3,c.a.awrap(fetch(t));case 3:if((r=n.sent).ok){n.next=6;break}throw Error("Unable to retrieve your favorite movies as this time. Please try again later");case 6:return n.next=8,c.a.awrap(r.json());case 8:return a=n.sent,n.abrupt("return",a);case 10:case"end":return n.stop()}}))},g=function(e,t){var r,a;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return r="http://localhost:3001/api/v1/users/".concat(e,"/moviefavorites/").concat(t),a={method:"DELETE",headers:{"Content-Type":"application/json"}},n.next=4,c.a.awrap(fetch(r,a));case 4:if(n.sent.ok){n.next=7;break}throw Error("Unable to remove this movie as a favorite at this time. Please try again later");case 7:case"end":return n.stop()}}))},w=function(e){return{type:"TOGGLE_FAV",id:e}},_=(r(42),r(9)),y=Object(h.b)((function(e){return{user:e.user}}),(function(e){return{toggleFav:function(t){return e(w(t))}}}))((function(e){var t=e.id,r=e.title,a=e.date,o=e.poster,s=(e.movie,e.isFavorite,e.toggleFav,e.user,e.refreshFavs,new Date(a+"T00:00").toString().split(" ").slice(1,4).join(" "));return n.a.createElement("article",{className:"movie-card",id:t},n.a.createElement("div",{className:"movie-details"},n.a.createElement("h2",null,r),n.a.createElement("h3",null,s)),n.a.createElement(_.b,{to:"/movies/".concat(t)},n.a.createElement("img",{className:"poster",src:"http://image.tmdb.org/t/p/w1280".concat(o),alt:"Movie poster"})))})),F=(r(44),Object(h.b)((function(e){return{movies:e.movies,favorites:e.favorites}}))((function(e){var t=e.viewAll,r=e.movies,a=e.favorites,o=e.refreshFavs,s=(t?r:a).map((function(e){return n.a.createElement(y,{key:e.id,id:e.id,title:e.title,date:e.release_date,poster:e.poster_path,vote:e.vote_average,overview:e.overview,isFavorite:e.isFavorite,movie:e,refreshFavs:o})}));return n.a.createElement("section",{className:"movie-container"},s)}))),k=(r(45),Object(h.b)((function(e){return{user:e.user}}),(function(e){return{toggleFav:function(t){return e(w(t))}}}))((function(e){var t=e.movie,r=(e.refreshFavs,e.user,e.toggleFav,t.backdrop_path),a=t.overview,o=t.poster_path,s=t.release_date,i=t.title,c=t.vote_average,u=new Date(s+"T00:00").toString().split(" ").slice(1,4).join(" ");return n.a.createElement("section",{className:"cardDetails"},n.a.createElement("img",{className:"movie-backdrop",src:"http://image.tmdb.org/t/p/w1280".concat(r),alt:"movie backdrop"}),n.a.createElement("article",{className:"movie-details-wrapper"},n.a.createElement("img",{className:"movie-poster",src:"http://image.tmdb.org/t/p/w1280".concat(o),alt:"movie poster"}),n.a.createElement("div",{className:"movie-info-wrapper"},n.a.createElement("h1",{className:"movie-title"},i),n.a.createElement("h2",null,"Released: ",u),n.a.createElement("p",null,a),n.a.createElement("h2",null,"Vote Average: ",c),n.a.createElement(_.b,{to:"/"},n.a.createElement("button",{className:"back-btn",type:"button"},"\u25c0 back")))))}))),x=(r(46),Object(h.b)((function(e){return{user:e.user,favorites:e.favorites}}),(function(e){return{setUser:function(t){return e(function(e){return{type:"SET_USER",user:e}}(t))},clearFavs:function(){return e({type:"CLEAR_FAVS"})}}}))((function(e){var t=e.user;e.setUser,e.clearFavs,e.favorites;return n.a.createElement("header",null,n.a.createElement("h1",{className:"header-title"},"Movie Tracker"),n.a.createElement("div",{className:"header-btn-wrapper"},null!==t&&n.a.createElement("h2",null,"Welcome ",t.name),n.a.createElement(_.b,{to:"/"},n.a.createElement("button",{className:"home nav-btn"},"Back to All Movies"))))}))),O=(r(47),function(e){function t(){var e,r;Object(u.a)(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(r=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).refreshFavs=function(e){var t,a,n,o,s,i;return c.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=r.props,a=t.throwError,n=t.setFavs,o=t.user,u.prev=1,!e.isFavorite){u.next=7;break}return u.next=5,c.a.awrap(g(o.id,e.id));case 5:u.next=9;break;case 7:return u.next=9,c.a.awrap(b(o.id,e));case 9:return u.next=11,c.a.awrap(E(o.id));case 11:s=u.sent,n(s),u.next=19;break;case 15:u.prev=15,u.t0=u.catch(1),i=u.t0.message,a(i);case 19:case"end":return u.stop()}}),null,null,[[1,15]])},r}return Object(m.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e,t,r,a,n;return c.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=this.props,t=e.addMovies,r=e.throwError,o.prev=1,o.next=4,c.a.awrap(d());case 4:a=o.sent,t(a),o.next=12;break;case 8:o.prev=8,o.t0=o.catch(1),n=o.t0.message,r(n);case 12:case"end":return o.stop()}}),null,this,[[1,8]])}},{key:"render",value:function(){var e=this,t=this.props.errorMsg;return n.a.createElement("div",{className:"App"},n.a.createElement(x,{exact:!0,path:"/"}),t&&n.a.createElement("h2",null,t),n.a.createElement(f.b,{exact:!0,path:"/",render:function(){return n.a.createElement(F,{viewAll:!0,refreshFavs:e.refreshFavs})}}),n.a.createElement(f.b,{path:"/movies/:id",render:function(t){var r=t.match,a=e.props.movies.find((function(e){return e.id===parseInt(r.params.id)}));return void 0===a?n.a.createElement(f.a,{to:"/"}):n.a.createElement(k,{key:a.id,movie:a,refreshFavs:e.refreshFavs})}}))}}]),t}(a.Component)),j=Object(h.b)((function(e){return{errorMsg:e.errorMsg,user:e.user,movies:e.movies}}),(function(e){return{addMovies:function(t){return e(function(e){return{type:"ADD_MOVIES",movies:e}}(t))},throwError:function(t){return e(function(e){return{type:"THROW_ERROR",errorMsg:e}}(t))},setFavs:function(t){return e(function(e){return{type:"SET_FAVS",favs:e}}(t))}}}))(O),S=r(12),T=r(28),A=r(16),N=Object(S.combineReducers)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MOVIES":return t.movies;case"TOGGLE_FAV":return e.map((function(e){return e.id===t.id?Object(A.a)({},e,{isFavorite:!e.isFavorite}):e}));case"UPDATE_FAVS":return e.map((function(e){return t.favs.favorites.forEach((function(t){t.movie_id===e.id&&(e.isFavorite=!0)})),e}));default:return e}},errorMsg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"THROW_ERROR":return t.errorMsg;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.user;default:return e}},favorites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FAVS":return t.favs.favorites.map((function(e){return e.id=e.movie_id,Object(A.a)({},e,{isFavorite:!0})}));case"CLEAR_FAVS":return[];default:return e}}}),M=Object(S.createStore)(N,Object(T.composeWithDevTools)()),R=n.a.createElement(_.a,{basename:"/"},n.a.createElement(j,null));s.a.render(n.a.createElement(h.a,{store:M},R),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.12817394.chunk.js.map